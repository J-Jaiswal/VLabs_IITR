<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Virtual Labs</title>
    <!-- Tell the browser to be responsive to screen width -->
    <meta
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"
      name="viewport"
    />
    <!-- Bootstrap 3.3.6 -->
    <link rel="stylesheet" href="../../bootstrap/css/bootstrap.css" />
    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css"
    />
    <!-- Theme style -->
    <link rel="stylesheet" href="../../dist/css/AdminLTE.css" />
    <!-- AdminLTE Skins. Choose a skin from the css/skins folder instead of downloading all of them to reduce the load. -->
    <link rel="stylesheet" href="../../dist/css/skins/_all-skins.min.css" />
    <script>
      window.onload = function () {
        document.getElementById("theory").className = "active treeview";
      };
    </script>
    <style>
      body {
        font-family: Arial, sans-serif;
        line-height: 1.6;
        margin: 24px;
        color: #1f2937;
        background: #fff;
      }
      p,
      li {
        text-align: justify;
      }
      h1,
      h2,
      h3 {
        margin: 10px 0 6px;
        color: #111827;
      }
      .card {
        border: 1px solid #e5e7eb;
        border-radius: 12px;
        padding: 14px 16px;
        margin: 12px 0;
        background: #fafafa;
      }
      .eq {
        background: #f8fafc;
        border: 1px solid #e5e7eb;
        border-radius: 8px;
        padding: 8px 10px;
        overflow: auto;
        margin: 8px 0;
      }
      code {
        background: #eef2f7;
        padding: 2px 6px;
        border-radius: 6px;
        font-family: ui-monospace, SFMono-Regular, Menlo, Consolas,
          "Liberation Mono", monospace;
      }
      .muted {
        color: #6b7280;
      }
      .hi {
        color: #0ea5e9;
        font-weight: 600;
      } /* accent highlight */
      .warn {
        color: #a855f7;
        font-weight: 600;
      } /* uncertainty highlight */
      ul,
      ol {
        margin-left: 18px;
      }
    </style>
  </head>

  <body class="hold-transition skin-blue sidebar-mini">
    <!--Navigation Bar-->
    <div class="navbar navbar-default">
      <div class="container">
        <div class="navbar-header">
          <button
            type="button"
            class="navbar-toggle"
            data-toggle="collapse"
            data-target="#navbar-ex-collapse"
          >
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="http://iitb.ac.in"
            ><span
              ><img
                src="images/iitrLogo.png"
                style="margin-top: -15px; height: 50px; width: 400px" /></span
          ></a>
        </div>
        <div class="collapse navbar-collapse" id="navbar-ex-collapse"></div>
      </div>
    </div>

    <div class="wrapper">
      <header class="main-header">
        <!-- Logo -->
        <a
          href="../index.html"
          class="logo"
          style="
            background-color: #009dff;
            border-right: solid;
            border-right-color: #1261a0;
          "
        >
          <p align="center" style="font-size: 1em"><b>Geophysics Lab</b></p>
        </a>
        <!-- Header Navbar: style can be found in header.less -->
        <nav class="navbar navbar-static-top" style="background-color: #009dff">
          <!-- Sidebar toggle button-->
          <a
            href="#"
            class="sidebar-toggle"
            data-toggle="offcanvas"
            role="button"
            id="toggle_nav"
          >
            <span class="sr-only">Toggle navigation</span>
          </a>
          <section class="content-header">
            <ol class="breadcrumb">
              <li>
                <a href="../index.html"
                  ><i class="fa fa-dashboard"></i>Geophysics Lab</a
                >
              </li>
              <li>
                <a href="#">Finding location of an earthquake</a>
              </li>
            </ol>
          </section>
        </nav>
      </header>

      <!-- Left side column. contains the logo and sidebar -->
      <aside class="main-sidebar" style="background-color: #1261a0">
        <!-- sidebar: style can be found in sidebar.less -->
        <section class="sidebar">
          <!-- search form -->
          <form action="#" method="get" class="sidebar-form">
            <div class="input-group"></div>
          </form>
          <!-- /.sear ch form -->
          <!-- sidebar menu: : style can be found in sidebar.less -->
          <ul class="sidebar-menu" style="background-color: #1261a0">
            <li class="treeview" id="aim">
              <a href="index.html" id="aim">
                <i class="fa fa-files-o" style="color: white"></i>
                <span style="color: white">Aim</span>
              </a>
            </li>
            <li class="treeview" id="theory">
              <a href="theory.html" id="theory" onclick="theory()">
                <i class="fa fa-files-o" style="color: white"></i>
                <span style="color: white">Theory</span>
              </a>
            </li>
            <!--   <li class="treeview" id="numerical">
                    <a href="numerical.php">
                        <i class="fa fa-laptop"></i>
                        <span>Numerical</span>
                        <span class="pull-right-container">
                        </span>
                    </a>
                </li>
                <li class="treeview" id="program">
                    <a href="program.php">
                        <i class="fa fa-laptop"></i>
                        <span>Program</span>
                        <span class="pull-right-container">
                        </span>
                    </a>
                </li> -->
            <li class="treeview" id="pretest">
              <a href="pretest.html" id="pretest">
                <i class="fa fa-files-o" style="color: white"></i>
                <span style="color: white">Pre Test</span>
              </a>
            </li>

            <li class="treeview" id="procedure">
              <a href="procedure.html" id="procedure">
                <i class="fa fa-files-o" style="color: white"></i>
                <span style="color: white">Procedure</span>
              </a>
            </li>
            <li class="treeview" id="simulation">
              <a href="simulation.html" id="simulation">
                <i class="fa fa-laptop" style="color: white"></i>
                <span style="color: white">Simulation</span>
                <span class="pull-right-container"> </span>
              </a>
            </li>

            <li class="treeview" id="posttest">
              <a href=" posttest.html" id="posttest">
                <i class="fa fa-files-o" style="color: white"> </i>
                <span style="color: white">Post Test</span>
                <span class="pull-right-container"> </span>
              </a>
            </li>
            <li class="treeview" id="ref">
              <a href="references.html" id="references">
                <i class="fa fa-files-o" style="color: white"></i>
                <span style="color: white">References</span>
                <span class="pull-right-container"> </span>
              </a>
            </li>
          </ul>
        </section>
        <!-- /.sidebar -->
      </aside>

      <div class="content-wrapper">
        <section class="content-header">
          <h1 align="center">Finding location of an earthquake</h1>
        </section>

        <!-- Main content -->
        <section class="content">
          <div class="card">
            <h2>Parameters</h2>
            <ul>
              <li>
                <span class="hi">N (stations) & geometry:</span> more is good,
                but <em>wide spread</em> around the source helps most for
                stability.
              </li>
              <li>
                <span class="hi">σ (noise):</span> larger σ ⇒ higher expected
                RMS; use whitening (÷σ) so residuals are in “sigma units”.
              </li>
              <li>
                <span class="hi">k (outlier level):</span> a single bad pick
                that can skew the fit and the misfit basin; use λ to stabilize.
              </li>
              <li>
                <span class="hi">λ (damping):</span> increases better results
                for poor geometry/noise; too large ⇒ slower & biased; too small
                ⇒ unstable.
              </li>
              <li>
                <span class="hi">v<sub>start</sub> vs v<sub>true</sub>:</span>
                Mismatch shifts the misfit landscape and RMS values.
              </li>
            </ul>
          </div>
          <!-- 2) ARRIVAL-TIME CALCULATION (forward physics) -->
          <div class="card">
            <h2>Arrival-time Calculation (forward model)</h2>
            <p>
              In a homogeneous medium, the first-arriving P-wave travels on a
              straight path at constant speed <em>v</em>. Travel time equals
              origin time plus distance divided by speed.
            </p>

            <!-- R_i -->
            <div
              style="
                display: block;
                max-width: min(760px, 92vw);
                margin: 12px auto;
                text-align: center;
                line-height: 1.6;
                overflow-wrap: anywhere;
              "
            >
              <span class="eq" style="display: block">
                <span
                  class="math"
                  style="
                    display: inline-block;
                    font-size: clamp(1.22rem, 1rem + 1vw, 1.95rem);
                    font-weight: 400;
                    letter-spacing: 0.02px;
                  "
                >
                  R<sub>i</sub> = √[ (x<sub>s</sub> − x<sub>i</sub>)² + (y<sub
                    >s</sub
                  >
                  − y<sub>i</sub>)² + (z<sub>s</sub> − z<sub>i</sub>)² ]
                </span>
              </span>
            </div>

            <!-- g_i(m) -->
            <div
              style="
                display: block;
                max-width: min(760px, 92vw);
                margin: 6px auto;
                text-align: center;
                line-height: 1.6;
                overflow-wrap: anywhere;
              "
            >
              <span class="eq" style="display: block">
                <span
                  class="math"
                  style="
                    display: inline-block;
                    font-size: clamp(1.22rem, 1rem + 1vw, 1.95rem);
                    font-weight: 400;
                    letter-spacing: 0.02px;
                  "
                >
                  g<sub>i</sub>(m) = t<sub>0</sub> + R<sub>i</sub> / v
                </span>
              </span>
            </div>

            <ul>
              <li>
                <span class="hi">Model (unknowns):</span> <em>m</em> =
                [x<sub>s</sub>, y<sub>s</sub>, z<sub>s</sub>, t<sub>0</sub>, v]
                with units [km, km, km, s, km/s].
              </li>
              <li>
                <span class="hi">Stations (known):</span> (x<sub>i</sub>,
                y<sub>i</sub>, z<sub>i</sub>), i=1…N.
              </li>
              <li>
                These equations generate predictions that we compare to the
                measured times to find the best-fitting <em>m</em>.
                <p class="muted">
                  Units: km (distance), s (time), km·s<sup>−1</sup> (velocity).
                </p>
              </li>
            </ul>
          </div>

          <!-- 3) SYNTHETIC TIMES WITH NOISE & OUTLIER -->
          <div class="card">
            <h2>Synthetic Arrival Times</h2>
            <p>
              Observed picks are never perfect. We model random pick error as
              Gaussian noise and allow one “bad pick” outlier to study more
              acurate sythetic data.
            </p>

            <!-- t_obs -->
            <div
              style="
                display: block;
                max-width: min(760px, 92vw);
                margin: 12px auto;
                text-align: center;
                line-height: 1.6;
                overflow-wrap: anywhere;
              "
            >
              <span class="eq" style="display: block">
                <span
                  class="math"
                  style="
                    display: inline-block;
                    font-size: clamp(1.22rem, 1rem + 1vw, 1.95rem);
                    font-weight: 400;
                    letter-spacing: 0.02px;
                  "
                >
                  t<sub>i</sub><sup>obs</sup> = t<sub>0</sub><sup>true</sup> +
                  R<sub>i</sub>(m<sup>true</sup>)/v<sup>true</sup> + ε<sub
                    >i</sub
                  >
                  + δ<sub>i</sub><sup>outlier</sup>
                </span>
              </span>
            </div>

            <!-- noise & outlier -->
            <div
              style="
                display: block;
                max-width: min(760px, 92vw);
                margin: 6px auto;
                text-align: center;
                line-height: 1.6;
                overflow-wrap: anywhere;
              "
            >
              <span class="eq" style="display: block">
                <span
                  class="math"
                  style="
                    display: inline-block;
                    font-size: clamp(1.16rem, 0.98rem + 0.9vw, 1.8rem);
                    font-weight: 400;
                    letter-spacing: 0.02px;
                  "
                >
                  ε<sub>i</sub> ∼ 𝒩(0, σ²), &nbsp; δ<sub>i</sub
                  ><sup>outlier</sup> ∈ {0, ±kσ}
                </span>
              </span>
            </div>

            <ul>
              <li>
                <span class="hi">σ (noise ):</span> higher σ ⇒ picks scatter
                more; expected RMS rises.
              </li>
              <li>
                <span class="hi">k (outlier strength):</span> scales the single
                bad pick (e.g., 3σ or 6σ) to show its effect on the solution and
                misfit map.
              </li>
            </ul>
          </div>

          <!-- 4) INVERSE MODELING: RMS, JACOBIAN, WHITENING, TIKHONOV -->
          <div class="card">
            <h2>Inverse modeling</h2>

            <p>
              We seek the model
              <em>m</em> that best fits the data by minimizing squared
              residuals. Because travel time depends nonlinearly on
              <em>m</em> (via distance), we linearize around the current guess,
              solve a small damped system for an update Δm, and repeat.
            </p>

            <p><b>Residuals and RMS</b> (what we try to shrink)</p>

            <!-- residual -->
            <div
              style="
                display: block;
                max-width: min(760px, 92vw);
                margin: 12px auto;
                text-align: center;
                line-height: 1.6;
                overflow-wrap: anywhere;
              "
            >
              <span class="eq" style="display: block">
                <span
                  class="math"
                  style="
                    display: inline-block;
                    font-size: clamp(1.22rem, 1rem + 1vw, 1.95rem);
                    font-weight: 400;
                    letter-spacing: 0.02px;
                  "
                >
                  r<sub>i</sub>(m) = t<sub>i</sub><sup>obs</sup> −
                  g<sub>i</sub>(m)
                </span>
              </span>
            </div>

            <!-- RMS -->
            <div
              style="
                display: block;
                max-width: min(760px, 92vw);
                margin: 6px auto;
                text-align: center;
                line-height: 1.6;
                overflow-wrap: anywhere;
              "
            >
              <span class="eq" style="display: block">
                <span
                  class="math"
                  style="
                    display: inline-block;
                    font-size: clamp(1.22rem, 1rem + 1vw, 1.95rem);
                    font-weight: 400;
                    letter-spacing: 0.02px;
                  "
                >
                  RMS(m) = √[ (1/N) ∑<sub>i=1</sub><sup>N</sup> r<sub>i</sub>² ]
                </span>
              </span>
            </div>

            <!-- <p class="muted">
              RMS vs iteration shows convergence: it should fall quickly, then
              flatten near the noise level.
            </p> -->

            <p>
              <b>Linearization (Jacobian)</b> — Sensitivities of time to each
              parameter at the current guess.
              <span class="math">m<sup>(k)</sup></span>
            </p>

            <!-- Jacobian rows -->
            <div
              style="
                display: block;
                max-width: min(760px, 92vw);
                margin: 12px auto;
                text-align: center;
                line-height: 1.6;
                overflow-wrap: anywhere;
              "
            >
              <span class="eq" style="display: block">
                <span
                  class="math"
                  style="
                    display: inline-block;
                    font-size: clamp(1.18rem, 0.98rem + 0.9vw, 1.85rem);
                    font-weight: 400;
                    letter-spacing: 0.02px;
                  "
                >
                  ∂t<sub>i</sub>/∂x<sub>s</sub> = (x<sub>s</sub> −
                  x<sub>i</sub>)/(v R<sub>i</sub>),&nbsp; ∂t<sub>i</sub>/∂y<sub
                    >s</sub
                  >
                  = (y<sub>s</sub> − y<sub>i</sub>)/(v R<sub>i</sub>),&nbsp;
                  ∂t<sub>i</sub>/∂z<sub>s</sub> = (z<sub>s</sub> −
                  z<sub>i</sub>)/(v R<sub>i</sub>),<br />
                  ∂t<sub>i</sub>/∂t<sub>0</sub> = 1, &nbsp; ∂t<sub>i</sub>/∂v =
                  − R<sub>i</sub> / v²
                </span>
              </span>
            </div>

            <!-- <p class="muted">
              Interpretation: moving the source toward a station makes its time
              earlier; increasing velocity speeds all times (negative ∂t/∂v).
            </p> -->

            <p>
              <b>Whitening (by noise)</b> — Scaling residuals and rows by their
              uncertainty so the math is well-conditioned
            </p>

            <!-- whitening -->
            <div
              style="
                display: block;
                max-width: min(760px, 92vw);
                margin: 12px auto;
                text-align: center;
                line-height: 1.6;
                overflow-wrap: anywhere;
              "
            >
              <span class="eq" style="display: block">
                <span
                  class="math"
                  style="
                    display: inline-block;
                    font-size: clamp(1.18rem, 0.98rem + 0.9vw, 1.85rem);
                    font-weight: 400;
                    letter-spacing: 0.02px;
                  "
                >
                  G<sub>w</sub> = (1/σ)\,G, &nbsp;&nbsp; d<sub>w</sub> =
                  (1/σ)\,r
                </span>
              </span>
            </div>

            <!-- <p class="muted">
              With per-station uncertainties σ<sub>i</sub>, divide row
              <em>i</em> of <em>G</em> and entry <em>i</em> of <em>r</em> by
              σ<sub>i</sub>.
            </p> -->

            <p>
              <b>Tikhonov-damped equation</b> — stable Gauss–Newton step; then
              add it to the model
            </p>

            <!-- normal equations -->
            <div
              style="
                display: block;
                max-width: min(760px, 92vw);
                margin: 12px auto;
                text-align: center;
                line-height: 1.6;
                overflow-wrap: anywhere;
              "
            >
              <span class="eq" style="display: block">
                <span
                  class="math"
                  style="
                    display: inline-block;
                    font-size: clamp(1.22rem, 1rem + 1vw, 1.95rem);
                    font-weight: 400;
                    letter-spacing: 0.02px;
                  "
                >
                  (G<sub>w</sub><sup>⊤</sup> G<sub>w</sub> + λ² I)\,Δm = G<sub
                    >w</sub
                  ><sup>⊤</sup> d<sub>w</sub>, &nbsp;&nbsp; m<sup>(k+1)</sup> =
                  m<sup>(k)</sup> + Δm
                </span>
              </span>
            </div>

            <ul>
              <li>
                <span class="hi">λ (damping):</span> bigger λ ⇒ smaller, safer
                steps (adds bias but stabilizes weak geometry/outliers).
              </li>
              <li>
                <span class="hi">maxIter / stop:</span> stop when ‖Δm‖ is tiny
                or RMS no longer improves.
              </li>
              <li>
                The damping term λ²I prevents huge updates when stations are
                poorly placed or data are noisy.
              </li>
            </ul>
          </div>

          <!-- 5) MISFIT MAP (2D scan) -->
          <div class="card">
            <h2>Misfit map</h2>
            <p>
              For visualization, we scan surface positions (x,y) using a depth
              <span class="hi">z</span> and fixed
              <span class="hi">v<sub>start</sub></span
              >. At each gridpoint, we plot the mean-squared misfit.
            </p>

            <!-- t0* -->
            <div
              style="
                display: block;
                max-width: min(760px, 92vw);
                margin: 12px auto;
                text-align: center;
                line-height: 1.6;
                overflow-wrap: anywhere;
              "
            >
              <span class="eq" style="display: block">
                <span
                  class="math"
                  style="
                    display: inline-block;
                    font-size: clamp(1.22rem, 1rem + 1vw, 1.95rem);
                    font-weight: 400;
                    letter-spacing: 0.02px;
                  "
                >
                  t<sub>0</sub><sup>*</sup>(x,y; z) = (1/N) ∑<sub>i=1</sub
                  ><sup>N</sup> [ t<sub>i</sub><sup>obs</sup> −
                  R<sub>i</sub>(x,y,z)/v<sub>start</sub> ]
                </span>
              </span>
            </div>

            <!-- J(x,y) -->
            <div
              style="
                display: block;
                max-width: min(760px, 92vw);
                margin: 6px auto;
                text-align: center;
                line-height: 1.6;
                overflow-wrap: anywhere;
              "
            >
              <span class="eq" style="display: block">
                <span
                  class="math"
                  style="
                    display: inline-block;
                    font-size: clamp(1.22rem, 1rem + 1vw, 1.95rem);
                    font-weight: 400;
                    letter-spacing: 0.02px;
                  "
                >
                  J(x,y; z) = (1/N) ∑<sub>i=1</sub><sup>N</sup> [ t<sub>i</sub
                  ><sup>obs</sup> − ( t<sub>0</sub><sup>*</sup>(x,y; z) +
                  R<sub>i</sub>(x,y,z)/v<sub>start</sub> ) ]²
                </span>
              </span>
            </div>

            <ul>
              <li>
                <span class="hi">What it shows:</span> Brighter areas = lower
                misfit for the chosen <em>z</em> and <em>v<sub>start</sub></em
                >; the basin hints where the epicenter likely sits.
              </li>
              <li>
                <span class="hi">Parameters:</span> grid resolution (pixels),
                display depth z (km), assumed v<sub>start</sub> (km/s).
              </li>
            </ul>
          </div>
        </section>
      </div>

      <footer class="main-footer">
        <h4 align="center">
          Lab contributed by IIT Roorkee
          <!-- Institute Name -->
        </h4>
      </footer>
    </div>
  </body>
</html>
<script>
  function theory() {
    document.getElementById("theory").style.backgroundColor = "#009dff";
  }
</script>
<!-- ./wrapper -->
<!-- jQuery 2.2.3 -->
<script src="../../plugins/jQuery/jquery-2.2.3.min.js"></script>
<!-- jQuery UI 1.11.4 -->
<script src="https://code.jquery.com/ui/1.11.4/jquery-ui.min.js"></script>
<!-- Bootstrap 3.3.6 -->
<script src="../../bootstrap/js/bootstrap.min.js"></script>
<!-- Slimscroll -->
<script src="../../plugins/slimScroll/jquery.slimscroll.min.js"></script>
<!-- FastClick -->
<script src="../../plugins/fastclick/fastclick.js"></script>
<!-- AdminLTE App -->
<script src="../../dist/js/app.min.js"></script>
