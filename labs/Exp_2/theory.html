<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Virtual Labs</title>
    <!-- Tell the browser to be responsive to screen width -->
    <meta
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"
      name="viewport"
    />
    <!-- Bootstrap 3.3.6 -->
    <link rel="stylesheet" href="../../bootstrap/css/bootstrap.css" />
    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css"
    />
    <!-- Theme style -->
    <link rel="stylesheet" href="../../dist/css/AdminLTE.css" />
    <!-- AdminLTE Skins -->
    <link rel="stylesheet" href="../../dist/css/skins/_all-skins.min.css" />
    <script>
      window.onload = function () {
        document.getElementById("theory").className = "active treeview";
      };
    </script>

    <!-- ====== Responsive Enhancements (adds only; nothing removed) ====== -->
    <style>
      /* Base */
      :root {
        --page-pad: 24px;
        --card-pad: 14px 16px;
        --text: #1f2937;
        --headline: #111827;
        --border: #e5e7eb;
        --card: #fafafa;
        --eqbg: #f8fafc;
        --codebg: #eef2f7;
      }

      html,
      body {
        height: 100%;
      }

      body {
        font-family: Arial, sans-serif;
        line-height: 1.6;
        margin: var(--page-pad);
        color: var(--text);
        background: #fff;
      }

      /* Make all images fluid by default (equations, logos, etc.) */
      img {
        max-width: 100%;
        height: auto;
      }

      p,
      li {
        text-align: justify;
      }

      h1,
      h2,
      h3 {
        margin: 10px 0 6px;
        color: var(--headline);
      }

      .card {
        border: 1px solid var(--border);
        border-radius: 12px;
        padding: var(--card-pad);
        margin: 12px 0;
        background: var(--card);
      }

      .eq {
        background: var(--eqbg);
        border: 1px solid var(--border);
        border-radius: 8px;
        padding: 8px 10px;
        overflow: auto;
        margin: 8px 0;
      }

      code {
        background: var(--codebg);
        padding: 2px 6px;
        border-radius: 6px;
        font-family: ui-monospace, SFMono-Regular, Menlo, Consolas,
          "Liberation Mono", monospace;
      }

      .muted {
        color: #6b7280;
      }
      .hi {
        color: #0ea5e9;
        font-weight: 600;
      }
      .warn {
        color: #a855f7;
        font-weight: 600;
      }

      ul,
      ol {
        margin-left: 18px;
      }

      /* Navbar brand image scaling */
      .navbar .navbar-brand img {
        display: block;
        height: 50px;
        width: auto; /* let width auto-scale */
        max-width: 100%; /* prevent overflow */
        margin-top: -15px;
      }

      /* Breadcrumb: allow horizontal scroll on mobile to avoid wrapping chaos */
      .content-header .breadcrumb {
        white-space: nowrap;
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
      }

      /* Equation containers: ensure no sideways overflow breaks layout */
      .eq .math,
      .eq img {
        max-width: 100%;
      }

      /* Keep theory blocks readable on very small screens */
      #theory-brief {
        overflow-wrap: anywhere;
      }

      /* Sidebar colors already set inline; improve touch target spacing */
      .sidebar-menu > li > a {
        padding-top: 10px;
        padding-bottom: 10px;
      }

      /* Content wrapper breathing room when sidebar overlays on mobile */
      .content-wrapper {
        background: #fff;
      }

      /* ===== Mobile-first adjustments ===== */
      @media (max-width: 991px) {
        /* Reduce page edge margins on tablets/phones */
        body {
          margin: 14px;
        }

        /* Slightly reduce heading sizes for small screens */
        h1 {
          font-size: 1.35rem;
        }
        h2 {
          font-size: 1.15rem;
        }
        h3 {
          font-size: 1.05rem;
        }

        /* Cards: tighter padding */
        .card {
          padding: 12px 12px;
        }

        /* Navbar brand image a bit smaller on narrow screens */
        .navbar .navbar-brand img {
          height: 40px;
          margin-top: -10px;
        }

        /* AdminLTE sidebar: turn into overlay drawer */
        .main-sidebar {
          position: fixed;
          top: 0;
          bottom: 0;
          left: -240px; /* hidden by default */
          width: 240px;
          max-width: 80vw;
          z-index: 1040; /* above content */
          transition: left 0.25s ease;
        }
        .sidebar-open .main-sidebar {
          left: 0;
        }

        /* Dim background when sidebar open (AdminLTE adds .sidebar-open on body) */
        .sidebar-open .content-wrapper::before {
          content: "";
          position: fixed;
          inset: 0;
          background: rgba(0, 0, 0, 0.35);
          z-index: 1039;
        }

        /* Make content span full width */
        .content-wrapper,
        .right-side,
        .main-footer,
        .main-header .navbar {
          margin-left: 0 !important;
        }
      }

      /* ===== Tiny phones ===== */
      @media (max-width: 575px) {
        /* Even tighter body margin */
        body {
          margin: 10px;
        }

        /* Compress paddings */
        .card {
          padding: 10px;
        }

        /* Code/eq blocks scroll nicely */
        .eq {
          padding: 8px;
        }
        code {
          display: inline-block;
          max-width: 100%;
          overflow-x: auto;
        }

        /* Breadcrumb smaller text */
        .content-header .breadcrumb {
          font-size: 12px;
        }

        /* Header lab title: keep on one line without overflow */
        .logo p {
          font-size: 0.95em !important;
        }
      }

      /* ===== Large screens (keeps your original look) ===== */
      @media (min-width: 1200px) {
        body {
          margin: var(--page-pad);
        }
        .card {
          padding: var(--card-pad);
        }
      }
    </style>
  </head>

  <body class="hold-transition skin-blue sidebar-mini">
    <!--Navigation Bar-->
    <div class="navbar navbar-default">
      <div class="container">
        <div class="navbar-header">
          <button
            type="button"
            class="navbar-toggle"
            data-toggle="collapse"
            data-target="#navbar-ex-collapse"
          >
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="http://iitb.ac.in">
            <span>
              <img
                src="images/iitrLogo.png"
                style="height: 50px; width: 400px"
              />
            </span>
          </a>
        </div>
        <div class="collapse navbar-collapse" id="navbar-ex-collapse"></div>
      </div>
    </div>

    <div class="wrapper">
      <header class="main-header">
        <!-- Logo -->
        <a
          href="../index.html"
          class="logo"
          style="
            background-color: #009dff;
            border-right: solid;
            border-right-color: #1261a0;
          "
        >
          <p align="center" style="font-size: 1em"><b>Geophysics Lab</b></p>
        </a>

        <!-- Header Navbar -->
        <nav class="navbar navbar-static-top" style="background-color: #009dff">
          <!-- Sidebar toggle button-->
          <a
            href="#"
            class="sidebar-toggle"
            data-toggle="offcanvas"
            role="button"
            id="toggle_nav"
          >
            <span class="sr-only">Toggle navigation</span>
          </a>
          <section class="content-header">
            <ol class="breadcrumb">
              <li>
                <a href="../index.html"
                  ><i class="fa fa-dashboard"></i>Geophysics Lab</a
                >
              </li>
              <li><a href="#">Finding location of an earthquake by inverse modeling </a></li>
            </ol>
          </section>
        </nav>
      </header>

      <!-- Left side column. contains the logo and sidebar -->
      <aside class="main-sidebar" style="background-color: #1261a0">
        <section class="sidebar">
          <!-- search form -->
          <form action="#" method="get" class="sidebar-form">
            <div class="input-group"></div>
          </form>

          <!-- sidebar menu -->
          <ul class="sidebar-menu" style="background-color: #1261a0">
            <li class="treeview" id="aim">
              <a href="index.html" id="aim">
                <i class="fa fa-files-o" style="color: white"></i>
                <span style="color: white">Aim</span>
              </a>
            </li>
            <li class="treeview" id="theory">
              <a href="theory.html" id="theory" onclick="theory()">
                <i class="fa fa-files-o" style="color: white"></i>
                <span style="color: white">Theory</span>
              </a>
            </li>
            <li class="treeview" id="pretest">
              <a href="pretest.html" id="pretest">
                <i class="fa fa-files-o" style="color: white"></i>
                <span style="color: white">Pre Test</span>
              </a>
            </li>
            <li class="treeview" id="procedure">
              <a href="procedure.html" id="procedure">
                <i class="fa fa-files-o" style="color: white"></i>
                <span style="color: white">Procedure</span>
              </a>
            </li>
            <li class="treeview" id="simulation">
              <a href="simulation.html" id="simulation">
                <i class="fa fa-laptop" style="color: white"></i>
                <span style="color: white">Simulation</span>
                <span class="pull-right-container"> </span>
              </a>
            </li>
            <li class="treeview" id="posttest">
              <a href=" posttest.html" id="posttest">
                <i class="fa fa-files-o" style="color: white"> </i>
                <span style="color: white">Post Test</span>
                <span class="pull-right-container"> </span>
              </a>
            </li>
            <li class="treeview" id="ref">
              <a href="references.html" id="references">
                <i class="fa fa-files-o" style="color: white"></i>
                <span style="color: white">References</span>
                <span class="pull-right-container"> </span>
              </a>
            </li>
          </ul>
        </section>
      </aside>

      <div class="content-wrapper">
        <section class="content-header">
          <h1 align="center">Finding location of an earthquake by inverse modeling</h1>
        </section>

        <!-- Main content -->
        <section class="content">
          <!-- 1) Workflow -->
          <!-- QUICK THEORY OVERVIEW -->
          <!-- QUICK THEORY OVERVIEW (plain-language, no symbols/equations) -->
          <div class="card" id="theory-brief">
            <h2>Overview</h2>

            <p>
      This experiment is about finding the earthquake’s location using the arrival
      times of waves at different stations. We makes “synthetic data”
      (arrival times with random noise, and sometimes one big error called an
      outlier) dor each station. Then we use an inversion method to guess the event location,
      depth, origin time, and speed. At each step the guess is corrected until
      the misfit (difference) gets smaller. Finally, we also draw a heatmap
      (misfit map) and an uncertainty ellipse to see how reliable the solution is.
    </p>
          </div>

          <!-- 2) ARRIVAL-TIME CALCULATION (forward physics) -->
          <div class="card">
            <h2>Arrival-Times Calculation (Forward Model)</h2>

<p>
  The wave travels in a straight line at constant speed.  
  Arrival time at a station = event start time + (distance ÷ speed).  
</p>
<p>
  These are our predicted times (forward model). If they match the observed picks,
  our guess for location, start time, and speed is good.
</p>


            <div
              style="
                display: block;
                max-width: min(760px, 92vw);
                margin: 16px auto;
                text-align: center;
                line-height: 1.6;
                overflow-wrap: anywhere;
              "
            >
              <span class="eq" style="display: block">
                <span
                  class="math"
                  style="
                    display: inline-block;
                    font-size: clamp(1.22rem, 1rem + 1vw, 1.95rem);
                    font-weight: 400;
                    letter-spacing: 0.02px;
                  "
                >
                  <!-- Distance R_i -->
                  <div
                    style="
                      display: block;
                      max-width: min(760px, 92vw);
                      margin: 8px auto;
                      text-align: center;
                      line-height: 1.6;
                      overflow-wrap: anywhere;
                    "
                  >
                    <img
                      src="https://latex.codecogs.com/png.image?\dpi{110}R_i=\sqrt{(x_s-x_i)^2&plus;(y_s-y_i)^2&plus;(z_s-z_i)^2}"
                      alt="R_i distance"
                      style="max-width: 100%; height: auto"
                    />
                  </div>

                  <!-- Forward model g_i(m) -->
                  <div
                    style="
                      display: block;
                      max-width: min(760px, 92vw);
                      margin: 8px auto;
                      text-align: center;
                      line-height: 1.6;
                      overflow-wrap: anywhere;
                    "
                  >
                    <img
                      src="https://latex.codecogs.com/png.image?\dpi{110}g_i(\mathbf{m})=t_0&plus;\frac{R_i}{v}"
                      alt="forward model g_i"
                      style="max-width: 100%; height: auto"
                    />
                  </div>
                </span>
              </span>
            </div>

            <ul style="margin: 0; padding-left: 18px">
              <li>
                <img
                  src="https://latex.codecogs.com/png.image?\dpi{110}R_i"
                  alt="R_i"
                />
                — distance from source to station i (km).
              </li>
              <li>
                <img
                  src="https://latex.codecogs.com/png.image?\dpi{110}(x_s,y_s,z_s)"
                  alt="xs ys zs"
                />
                — source (earthquake) coordinates (km).
              </li>
              <li>
                <img
                  src="https://latex.codecogs.com/png.image?\dpi{110}(x_i,y_i,z_i)"
                  alt="xi yi zi"
                />
                — station i coordinates (km).
              </li>
              <li>
                <img
                  src="https://latex.codecogs.com/png.image?\dpi{110}t_0"
                  alt="t0"
                />
                — origin (start) time of the earthquake (s).
              </li>
              <li>
                <img
                  src="https://latex.codecogs.com/png.image?\dpi{110}v"
                  alt="v"
                />
                — P-wave speed (km·s^{-1}).
              </li>
              <li>
                <img
                  src="https://latex.codecogs.com/png.image?\dpi{110}g_i(\mathbf{m})"
                  alt="g_i(m)"
                />
                — predicted arrival time at station i (s).
              </li>
              <li>
                <img
                  src="https://latex.codecogs.com/png.image?\dpi{110}\mathbf{m}=[x_s,y_s,z_s,t_0,v]"
                  alt="m vector"
                />
                — model parameters we estimate.
              </li>
              <li>
                <img
                  src="https://latex.codecogs.com/png.image?\dpi{110}i=1,\dots,N"
                  alt="i index"
                />
                — station index (there are N stations).
              </li>
            </ul>
          </div>

          <!-- 3) SYNTHETIC TIMES WITH NOISE & OUTLIER -->
          <div class="card">
            <h2>Synthetic Arrival Times</h2>
            <p>
              Real arrival-time picks contain randomness (human picking
              uncertainty, instrument noise, etc.). To mimic that, we start from
              the ideal, noise-free travel time and add small random errors. We
              can also inject one deliberately large mistake (an outlier) to see
              how robust the inversion is.
            </p>
            <!-- <p>
              These simulated “observed” times are what the inversion tries to
              fit. If our model is right and noise is small, the average
              mismatch will be close to the noise level.
            </p> -->

            <div
              style="
                display: block;
                max-width: min(760px, 92vw);
                margin: 12px auto;
                text-align: center;
                line-height: 1.6;
                overflow-wrap: anywhere;
              "
            >
              <span class="eq" style="display: block">
                <span
                  class="math"
                  style="
                    display: inline-block;
                    font-size: clamp(1.22rem, 1rem + 1vw, 1.95rem);
                    font-weight: 400;
                    letter-spacing: 0.02px;
                  "
                >
                  <img
                    src="https://latex.codecogs.com/png.image?\dpi{110}t_i^{\text{obs}}=t_0^{\text{true}}+\frac{R_i(\mathbf{m}^{\text{true}})}{v^{\text{true}}}+\varepsilon_i+\delta_i^{\text{outlier}}"
                    alt="t_obs"
                  />
                </span>
              </span>
            </div>

            <div
              style="
                display: block;
                max-width: min(760px, 92vw);
                margin: 6px auto;
                text-align: center;
                line-height: 1.6;
                overflow-wrap: anywhere;
              "
            >
              <span class="eq" style="display: block">
                <span
                  class="math"
                  style="
                    display: inline-block;
                    font-size: clamp(1.16rem, 0.98rem + 0.9vw, 1.8rem);
                    font-weight: 400;
                    letter-spacing: 0.02px;
                  "
                >
                  <img
                    src="https://latex.codecogs.com/png.image?\dpi{110}\varepsilon_i\sim\mathcal{N}(0,\sigma^2),\qquad\delta_i^{\text{outlier}}\in\{0,\,\pm k\sigma\}"
                    alt="noise+outlier"
                  />
                </span>
              </span>
            </div>

            <ul style="margin: 0; padding-left: 18px">
              <li>
                <img
                  src="https://latex.codecogs.com/png.image?\dpi{110}t_i^{\mathrm{obs}}"
                  alt="t_i^obs"
                />
                — the simulated “observed” pick at station i (seconds).
              </li>
              <li>
                <img
                  src="https://latex.codecogs.com/png.image?\dpi{110}t_0^{\mathrm{true}}"
                  alt="t0 true"
                />
                — the true (hidden) origin time (seconds).
              </li>
              <li>
                <img
                  src="https://latex.codecogs.com/png.image?\dpi{110}\mathbf{m}^{\mathrm{true}}"
                  alt="m true"
                />
                — the true (hidden) source parameters (location, depth, etc.).
              </li>
              <li>
                <img
                  src="https://latex.codecogs.com/png.image?\dpi{110}v^{\mathrm{true}}"
                  alt="v true"
                />
                — the true wave speed (km·s<sup>−1</sup>).
              </li>
              <li>
                <img
                  src="https://latex.codecogs.com/png.image?\dpi{110}R_i(\mathbf{m}^{\mathrm{true}})"
                  alt="Ri of m true"
                />
                — true source–station distance for station i (km).
              </li>
              <li>
                <img
                  src="https://latex.codecogs.com/png.image?\dpi{110}\varepsilon_i"
                  alt="epsilon_i"
                />
                — random pick error with zero mean and spread set by σ
                (seconds).
              </li>
              <li>
                <img
                  src="https://latex.codecogs.com/png.image?\dpi{110}\sigma"
                  alt="sigma"
                />
                — noise standard deviation (seconds).
              </li>
              <li>
                <img
                  src="https://latex.codecogs.com/png.image?\dpi{110}\delta_i^{\mathrm{outlier}}"
                  alt="delta outlier"
                />
                — optional large error added to one pick (seconds).
              </li>
              <li>
                <img
                  src="https://latex.codecogs.com/png.image?\dpi{110}k"
                  alt="k"
                />
                — outlier size in “sigma units”.
              </li>
            </ul>
            <p>
      The app highlights only the injected outlier station on the plots (if we chose mild/strong outlier).
    </p>
          </div>

          <!-- 4) INVERSE MODELING -->
          <div class="card">
            <h2>Inverse Modeling</h2>

            <p>
      We compare observed vs predicted times, compute residuals, and update the model to reduce RMS.
      Because the relationship is nonlinear, we linearize using the Jacobian.
      Then we solve a <b>damped normal equation</b>.
    </p>

            <p><b>Residuals and RMS</b></p>
     
            <div
              style="
                display: block;
                max-width: min(760px, 92vw);
                margin: 12px auto;
                text-align: center;
                line-height: 1.6;
                overflow-wrap: anywhere;
              "
            >
              <span class="eq" style="display: block">
                <span
                  class="math"
                  style="
                    display: inline-block;
                    font-size: clamp(1.22rem, 1rem + 1vw, 1.95rem);
                    font-weight: 400;
                    letter-spacing: 0.02px;
                  "
                >
                  <img
                    src="https://latex.codecogs.com/png.image?\dpi{110}r_i(\mathbf{m})=t_i^{\mathrm{obs}}-g_i(\mathbf{m}),\qquad\mathrm{RMS}(\mathbf{m})=\sqrt{\frac{1}{N}\sum_{i=1}^{N}r_i^2}"
                    alt="residual and RMS"
                  />
                </span>
              </span>
            </div>

            <ul style="margin: 0; padding-left: 18px">
              <li>
                <img
                  src="https://latex.codecogs.com/png.image?\dpi{110}r_i(\mathbf{m})"
                  alt="ri"
                />
                — residual at station i (observed − predicted) [s].
              </li>
              <li>
                <img
                  src="https://latex.codecogs.com/png.image?\dpi{110}t_i^{\mathrm{obs}}"
                  alt="tiobs"
                />
                — observed pick time at station i [s].
              </li>
              <li>
                <img
                  src="https://latex.codecogs.com/png.image?\dpi{110}g_i(\mathbf{m})"
                  alt="g_i"
                />
                — predicted arrival time at station i [s].
              </li>
              <li>
                <img
                  src="https://latex.codecogs.com/png.image?\dpi{110}\mathrm{RMS}(\mathbf{m})"
                  alt="RMS"
                />
                — root-mean-square error over all stations [s].
              </li>
              <li>
                <img
                  src="https://latex.codecogs.com/png.image?\dpi{110}N"
                  alt="N"
                />
                — number of stations.
              </li>
            </ul>

            <p style="margin-top: 14px"><b>Linearization (Jacobian)</b></p>
            <p style="margin:4px 0 8px">
  We simplify the curved (nonlinear) equations into a straight line (linear) equations.  
  Each fraction just tells us how the predicted time at a station changes if we slightly
  change one parameter (like x, y, z, t₀, or v).
</p>


            <div
              style="
                display: block;
                max-width: min(760px, 92vw);
                margin: 12px auto;
                text-align: center;
                line-height: 1.6;
                overflow-wrap: anywhere;
              "
            >
              <span class="eq" style="display: block">
                <span
                  class="math"
                  style="
                    display: inline-block;
                    font-size: clamp(1.18rem, 0.98rem + 0.9vw, 1.85rem);
                    font-weight: 400;
                    letter-spacing: 0.02px;
                  "
                >
                  <img
                    src="https://latex.codecogs.com/png.image?\dpi{110}\frac{\partial t_i}{\partial x_s}=\frac{x_s-x_i}{vR_i},\quad\frac{\partial t_i}{\partial y_s}=\frac{y_s-y_i}{vR_i},\quad\frac{\partial t_i}{\partial z_s}=\frac{z_s-z_i}{vR_i},\quad\frac{\partial t_i}{\partial t_0}=1,\quad\frac{\partial t_i}{\partial v}=-\frac{R_i}{v^2}"
                    alt="Jacobian"
                  />
                </span>
              </span>
            </div>

            <ul style="margin: 0; padding-left: 18px">
             
              <li>
                <img
                  src="https://latex.codecogs.com/png.image?\dpi{110}R_i"
                  alt="Ri"
                />
                — source–station distance [km]; closer stations (smaller
                <img
                  src="https://latex.codecogs.com/png.image?\dpi{110}R_i"
                  alt="Ri"
                />) are more sensitive.
              </li>
              <li>
                <img
                  src="https://latex.codecogs.com/png.image?\dpi{110}G"
                  alt="G"
                />
                — the Jacobian matrix collecting these derivatives for all
                stations.
              </li>
            </ul>

            <p style="margin-top: 14px"><b>Whitening (by noise)</b></p>
            <p style="margin:4px 0 8px">
  We use one common noise level <b>σ</b> . So we just divide
  both residuals and the Jacobian by σ. This means “measuring everything in units of its noise”.
  
</p>
            </p>

            <div style="text-align:center; margin:12px 0">
  <img
    src="https://latex.codecogs.com/png.image?\dpi{110}\mathbf{d}_w=\frac{\mathbf{d}}{\sigma},\qquad G_w=\frac{G}{\sigma}"
    alt="simple whitening"
    style="max-width:100%; height:auto"
  />
</div>

            <ul style="margin: 0; padding-left: 18px">
              
              <li>
                <img
                  src="https://latex.codecogs.com/png.image?\dpi{110}G_w"
                  alt="Gw"
                />
                — whitened Jacobian;
                <img
                  src="https://latex.codecogs.com/png.image?\dpi{110}\mathbf{d}_w"
                  alt="dw"
                />
                — whitened residuals.
              </li>
              <li>
                <img
                  src="https://latex.codecogs.com/png.image?\dpi{110}\sigma"
                  alt="sigma_i"
                />
                — standard deviation of pick noise .
              </li>
            </ul>

            <p style="margin-top: 14px">
              <b>Tikhonov-damped normal equations</b>
            </p>

            <p>
      We start with a rough guess of the earthquake’s location ( mean of all the stations coordinates represented by green dot in stations map ) and speed.
      The experiment compares predicted times vs observed times, and the differences
      are called residuals. The root-mean-square (RMS) of residuals tells us how
      good the fit is. Smaller RMS = better fit.
    </p>
    <p>
      To update the guess, we uses the Gauss–Newton method with damping (λ).
      Damping means we don’t take too large steps, so the solution stays stable.
      If λ is big, updates are slow but safe. If λ is small, updates are fast but
      can wobble.
    </p>
            <!-- <p style="margin: 4px 0 8px">
              Solve for a safe update that balances fitting data and keeping
              steps stable; the damping value λ controls the safety vs. bias
              trade-off.
            </p> -->

            <div
              style="
                display: block;
                max-width: min(760px, 92vw);
                margin: 12px auto;
                text-align: center;
                line-height: 1.6;
                overflow-wrap: anywhere;
              "
            >
              <span class="eq" style="display: block">
                <span
                  class="math"
                  style="
                    display: inline-block;
                    font-size: clamp(1.22rem, 1rem + 1vw, 1.95rem);
                    font-weight: 400;
                    letter-spacing: 0.02px;
                  "
                >
                  <img
                    src="https://latex.codecogs.com/png.image?\dpi{110}(G_w^{\top}G_w+\lambda^2 I)\,\Delta\mathbf{m}=G_w^{\top}\mathbf{d}_w,\qquad\mathbf{m}^{(k+1)}=\mathbf{m}^{(k)}+\Delta\mathbf{m}"
                    alt="Tikhonov normal equations"
                  />
                </span>
              </span>
            </div>

            <ul style="margin-top: 12px">
              <li>
                <b
                  >Choosing
                  <img
                    src="https://latex.codecogs.com/png.image?\dpi{110}\lambda"
                    alt="lambda"
                  />:</b
                >
                increase if updates oscillate/blow up; decrease if progress is
                too slow.
              </li>
              <li>
                <b>Stopping:</b> stop when
                <img
                  src="https://latex.codecogs.com/png.image?\dpi{110}\|\Delta\mathbf{m}\|"
                  alt="norm Delta m"
                />
                is tiny , RMS stops improving or you reached the max number of iterations.
              </li>
            </ul>

            <!-- UNCERTAINTY ELLIPSE -->
            <p style="margin-top: 14px"><b>Uncertainty Ellipse</b></p>
  
    <p>
      After inversion we also estimate the uncertainty. This is shown as a yellow
      ellipse around the final solution. It basically says “the true event is
      most likely inside this area.” The ellipse size depends on how many
      stations we have, how noisy the data are, and the damping value.
    </p>
    <ul style="margin:0; padding-left:18px">
      <li>Big ellipse = not very certain (Possible Reasons : few stations, noisy data).</li>
      <li>Small ellipse = more certain (good coverage).</li>
      <!-- <li>Ellipse angle shows the week direction where solution is less constrained.</li> -->
    </ul>
  
          </div>

          <!-- 5) MISFIT MAP (2D scan) -->
          <div class="card">
            <h2>Misfit Map</h2>
           <p>
      The misfit map is a heatmap that shows how well different (x, y) points
      could explain the data at the same depth and fixed speed. For each map
      location, the best origin time is calculated . Then we calculate
      the RMS error there. Warm colors mean better fit, so the true event should
      be near the warmest area.
    </p>

            <p><b>Best origin time at each grid point</b></p>
            <p style="margin: 4px 0 8px">
              For each heatmap cell , we compute the best origin time by averaging “observed - travel-time”.
            </p>

            <div
              style="
                display: block;
                max-width: min(760px, 92vw);
                margin: 12px auto;
                text-align: center;
                line-height: 1.6;
                overflow-wrap: anywhere;
              "
            >
              <span class="eq" style="display: block">
                <span
                  class="math"
                  style="
                    display: inline-block;
                    font-size: clamp(1.22rem, 1rem + 1vw, 1.95rem);
                    font-weight: 400;
                    letter-spacing: 0.02px;
                  "
                >
                  <img
                    src="https://latex.codecogs.com/png.image?\dpi{110}t_0^*(x,y;z)=\frac{1}{N}\sum_{i=1}^{N}\!\left(t_i^{\mathrm{obs}}-\frac{R_i(x,y,z)}{v_{\mathrm{start}}}\right)"
                    alt="t0 star"
                  />
                </span>
              </span>
            </div>

            <ul style="margin: 0; padding-left: 18px">
              <li>
                <img
                  src="https://latex.codecogs.com/png.image?\dpi{110}t_0^*"
                  alt="t0*"
                />
                — best origin time chosen at that grid point (seconds).
              </li>
              <li>
                <img
                  src="https://latex.codecogs.com/png.image?\dpi{110}t_i^{\mathrm{obs}}"
                  alt="t_i^obs"
                />
                — observed pick at station i (seconds).
              </li>
              <li>
                <img
                  src="https://latex.codecogs.com/png.image?\dpi{110}R_i(x,y,z)"
                  alt="Ri(x,y,z)"
                />
                — trial distance from grid point to station i (km).
              </li>
              <li>
                <img
                  src="https://latex.codecogs.com/png.image?\dpi{110}v_{\mathrm{start}}"
                  alt="v_start"
                />
                — assumed wave speed used for the scan (km·s<sup>−1</sup>).
              </li>
              <li>
                <img
                  src="https://latex.codecogs.com/png.image?\dpi{110}N"
                  alt="N"
                />
                — number of stations.
              </li>
            </ul>

            <p style="margin-top: 14px">
              <b>Mean-squared misfit used for the map</b>
            </p>
            <p style="margin: 4px 0 8px">
              With that best origin time, computing the average squared difference
              between observed and predicted times ( lower values mean a
              better-fitting location) .
            </p>

            <div
              style="
                display: block;
                max-width: min(760px, 92vw);
                margin: 6px auto;
                text-align: center;
                line-height: 1.6;
                overflow-wrap: anywhere;
              "
            >
              <span class="eq" style="display: block">
                <span
                  class="math"
                  style="
                    display: inline-block;
                    font-size: clamp(1.22rem, 1rem + 1vw, 1.95rem);
                    font-weight: 400;
                    letter-spacing: 0.02px;
                  "
                >
                  <!-- <img
                    src="https://latex.codecogs.com/png.image?\dpi{110}J(x,y;z)=\frac{1}{N}\sum_{i=1}^{N}\left[t_i^{\mathrm{obs}}-\left(t_0^*(x,y;z)+\frac{R_i(x,y,z)}{v_{\mathrm{start}}}\right)\right]^2=\mathrm{Var}_i\!\left(t_i^{\mathrm{obs}}-\frac{R_i(x,y,z)}{v_{\mathrm{start}}}\right)"
                    alt="J(x,y;z)"
                  /> -->
                    <img
                    src="https://latex.codecogs.com/png.image?\dpi{110}J(x,y;z)=\frac{1}{N}\sum_{i=1}^{N}\left[t_i^{\mathrm{obs}}-\left(t_0^*(x,y;z)+\frac{R_i(x,y,z)}{v_{\mathrm{start}}}\right)\right]^2"
                    alt="J(x,y;z)"
                  />
                </span>
              </span>
            </div>

            <ul style="margin: 0; padding-left: 18px">
              <li>
                <img
                  src="https://latex.codecogs.com/png.image?\dpi{110}J(x,y;z)"
                  alt="J"
                />
                — mean-squared misfit at the grid point (seconds<sup>2</sup>).
              </li>

              <li>
                Other symbols are the same as above:
                <img
                  src="https://latex.codecogs.com/png.image?\dpi{110}t_0^*"
                  alt="t0*"
                />,
                <img
                  src="https://latex.codecogs.com/png.image?\dpi{110}t_i^{\mathrm{obs}}"
                  alt="t_i^obs"
                />,
                <img
                  src="https://latex.codecogs.com/png.image?\dpi{110}R_i"
                  alt="Ri"
                />,
                <img
                  src="https://latex.codecogs.com/png.image?\dpi{110}v_{\mathrm{start}}"
                  alt="v_start"
                />.
              </li>
            </ul>
<!-- CONVERGENCE PLOT -->
<div class="card">
  <h2>Convergence Plot</h2>
  <p>
    The convergence plot shows how the RMS error (average mismatch) changes with
    each iteration of the inversion.  
  </p>
  <ul style="margin:0; padding-left:18px">
    <li><b>X-axis:</b> iteration number (steps of the inversion).</li>
    <li><b>Y-axis:</b> RMS error.</li>
    <li><b>Trend:</b> RMS should go down as the solution improves.</li>
    <li><b>Damping effect:</b> big λ = slow but stable, small λ = faster but may wobble.</li>
  </ul>
</div>

            
          </div>
        </section>
      </div>

      <footer class="main-footer">
        <h4 align="center">
          Lab contributed by IIT Roorkee
          <!-- Institute Name -->
        </h4>
      </footer>
    </div>

    <!-- Keep original script block -->
    <script>
      function theory() {
        document.getElementById("theory").style.backgroundColor = "#009dff";
      }

      // Improve AdminLTE mobile drawer behavior: toggle body class for overlay
      (function () {
        var toggle = document.getElementById("toggle_nav");
        if (!toggle) return;
        toggle.addEventListener("click", function (e) {
          e.preventDefault();
          document.body.classList.toggle("sidebar-open");
        });
      })();
    </script>

    <!-- jQuery 2.2.3 -->
    <script src="../../plugins/jQuery/jquery-2.2.3.min.js"></script>
    <!-- jQuery UI 1.11.4 -->
    <script src="https://code.jquery.com/ui/1.11.4/jquery-ui.min.js"></script>
    <!-- Bootstrap 3.3.6 -->
    <script src="../../bootstrap/js/bootstrap.min.js"></script>
    <!-- Slimscroll -->
    <script src="../../plugins/slimScroll/jquery.slimscroll.min.js"></script>
    <!-- FastClick -->
    <script src="../../plugins/fastclick/fastclick.js"></script>
    <!-- AdminLTE App -->
    <script src="../../dist/js/app.min.js"></script>
  </body>
</html>
